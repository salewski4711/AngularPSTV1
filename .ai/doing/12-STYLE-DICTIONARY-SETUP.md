# üé® STYLE DICTIONARY SETUP - Schritt-f√ºr-Schritt Anleitung

## Installation

```bash
# Style Dictionary installieren
npm install --save-dev style-dictionary

# Zus√§tzliche Dependencies f√ºr bessere Funktionen
npm install --save-dev tinycolor2  # F√ºr Farb-Transformationen
```

## üìÅ Ordnerstruktur erstellen

```bash
# Erstelle Token-Verzeichnisse
mkdir -p tokens/base
mkdir -p tokens/semantic  
mkdir -p tokens/component
mkdir -p build/tokens
```

## üîß Style Dictionary Konfiguration

### 1. Haupt-Konfigurationsdatei

```javascript
// style-dictionary.config.js
const StyleDictionary = require('style-dictionary');
const tinycolor = require('tinycolor2');

// Custom Transform f√ºr Farb-Variationen
StyleDictionary.registerTransform({
  name: 'color/shade',
  type: 'value',
  matcher: (token) => token.attributes.category === 'color',
  transformer: (token) => {
    const color = tinycolor(token.value);
    return {
      50: color.lighten(45).toHexString(),
      100: color.lighten(40).toHexString(),
      200: color.lighten(30).toHexString(),
      300: color.lighten(20).toHexString(),
      400: color.lighten(10).toHexString(),
      500: token.value,
      600: color.darken(10).toHexString(),
      700: color.darken(20).toHexString(),
      800: color.darken(30).toHexString(),
      900: color.darken(40).toHexString(),
    };
  }
});

module.exports = {
  source: ['tokens/**/*.json'],
  platforms: {
    // TypeScript Output
    typescript: {
      transformGroup: 'js',
      buildPath: 'src/app/core/design-system/',
      files: [{
        destination: 'design-tokens.generated.ts',
        format: 'javascript/es6',
        options: {
          outputReferences: true
        },
        filter: (token) => true,
        // Custom Format f√ºr TypeScript
        format: (dictionary) => {
          return `// Auto-generated by Style Dictionary
// DO NOT EDIT MANUALLY

export interface DesignTokens {
  ${generateTypeInterface(dictionary.properties)}
}

export const DESIGN_TOKENS: DesignTokens = {
${JSON.stringify(dictionary.properties, null, 2)}
};

// Helper functions
export function getToken(path: string): any {
  return path.split('.').reduce((obj, key) => obj?.[key], DESIGN_TOKENS);
}
`;
        }
      }]
    },
    
    // Tailwind Config Output
    tailwind: {
      transformGroup: 'js',
      buildPath: './',
      files: [{
        destination: 'tailwind-tokens.config.js',
        format: 'javascript/module',
        filter: (token) => true,
        format: (dictionary) => {
          return `// Auto-generated by Style Dictionary
module.exports = {
  theme: {
    extend: {
      colors: ${JSON.stringify(dictionary.properties.color, null, 2)},
      spacing: ${JSON.stringify(dictionary.properties.spacing, null, 2)},
      fontSize: ${JSON.stringify(dictionary.properties.typography?.fontSize || {}, null, 2)},
      fontFamily: ${JSON.stringify(dictionary.properties.typography?.fontFamily || {}, null, 2)},
      borderRadius: ${JSON.stringify(dictionary.properties.radius || {}, null, 2)},
      boxShadow: ${JSON.stringify(dictionary.properties.shadow || {}, null, 2)}
    }
  }
};`;
        }
      }]
    },
    
    // SCSS Variables Output
    scss: {
      transformGroup: 'scss',
      buildPath: 'src/styles/',
      files: [{
        destination: '_design-tokens.scss',
        format: 'scss/variables',
        options: {
          outputReferences: true
        }
      }]
    },
    
    // CSS Custom Properties
    css: {
      transformGroup: 'css',
      buildPath: 'src/styles/',
      files: [{
        destination: 'design-tokens.css',
        format: 'css/variables',
        options: {
          selector: ':root',
          outputReferences: true
        }
      }]
    },
    
    // JSON f√ºr Runtime
    json: {
      transformGroup: 'js',
      buildPath: 'src/assets/',
      files: [{
        destination: 'design-tokens.json',
        format: 'json/nested'
      }]
    }
  }
};
```

## üìù Token-Dateien erstellen

### 1. Basis-Farben
```json
// tokens/base/colors.json
{
  "color": {
    "primary": {
      "value": "#F99600",
      "type": "color",
      "description": "ProSolarTec Orange - Hauptmarkenfarbe"
    },
    "secondary": {
      "value": "#1C3661",
      "type": "color",
      "description": "ProSolarTec Blau - Sekund√§rfarbe"
    },
    "neutral": {
      "white": { "value": "#FFFFFF", "type": "color" },
      "black": { "value": "#000000", "type": "color" },
      "gray": {
        "50": { "value": "#FAFAFA", "type": "color" },
        "100": { "value": "#F5F5F5", "type": "color" },
        "200": { "value": "#E5E5E5", "type": "color" },
        "300": { "value": "#D4D4D4", "type": "color" },
        "400": { "value": "#A3A3A3", "type": "color" },
        "500": { "value": "#737373", "type": "color" },
        "600": { "value": "#525252", "type": "color" },
        "700": { "value": "#404040", "type": "color" },
        "800": { "value": "#262626", "type": "color" },
        "900": { "value": "#171717", "type": "color" }
      }
    },
    "success": {
      "value": "#10B981",
      "type": "color"
    },
    "warning": {
      "value": "#F59E0B",
      "type": "color"
    },
    "error": {
      "value": "#EF4444",
      "type": "color"
    }
  }
}
```

### 2. Spacing & Gr√∂√üen
```json
// tokens/base/spacing.json
{
  "spacing": {
    "0": { "value": "0", "type": "spacing" },
    "px": { "value": "1px", "type": "spacing" },
    "0.5": { "value": "0.125rem", "type": "spacing" },
    "1": { "value": "0.25rem", "type": "spacing" },
    "1.5": { "value": "0.375rem", "type": "spacing" },
    "2": { "value": "0.5rem", "type": "spacing" },
    "2.5": { "value": "0.625rem", "type": "spacing" },
    "3": { "value": "0.75rem", "type": "spacing" },
    "3.5": { "value": "0.875rem", "type": "spacing" },
    "4": { "value": "1rem", "type": "spacing" },
    "5": { "value": "1.25rem", "type": "spacing" },
    "6": { "value": "1.5rem", "type": "spacing" },
    "8": { "value": "2rem", "type": "spacing" },
    "10": { "value": "2.5rem", "type": "spacing" },
    "12": { "value": "3rem", "type": "spacing" },
    "16": { "value": "4rem", "type": "spacing" },
    "20": { "value": "5rem", "type": "spacing" },
    "24": { "value": "6rem", "type": "spacing" }
  }
}
```

### 3. Komponenten-Tokens
```json
// tokens/component/button.json
{
  "button": {
    "primary": {
      "background": { "value": "{color.primary.value}", "type": "color" },
      "color": { "value": "{color.neutral.white.value}", "type": "color" },
      "hover": {
        "background": { "value": "{color.primary.600}", "type": "color" }
      }
    },
    "secondary": {
      "background": { "value": "{color.secondary.value}", "type": "color" },
      "color": { "value": "{color.neutral.white.value}", "type": "color" },
      "hover": {
        "background": { "value": "{color.secondary.600}", "type": "color" }
      }
    },
    "padding": {
      "sm": { "value": "{spacing.2.value} {spacing.3.value}", "type": "spacing" },
      "md": { "value": "{spacing.2.5.value} {spacing.4.value}", "type": "spacing" },
      "lg": { "value": "{spacing.3.value} {spacing.5.value}", "type": "spacing" }
    }
  }
}
```

## üöÄ NPM Scripts hinzuf√ºgen

```json
// package.json
{
  "scripts": {
    "tokens:build": "style-dictionary build",
    "tokens:watch": "chokidar 'tokens/**/*.json' -c 'npm run tokens:build'",
    "tokens:clean": "rimraf src/app/core/design-system/design-tokens.generated.* src/styles/_design-tokens.scss",
    "prebuild": "npm run tokens:build",
    "prestart": "npm run tokens:build",
    "tokens:validate": "node scripts/validate-tokens.js"
  }
}
```

## üîÑ Tailwind Integration

```javascript
// tailwind.config.js
const tokenConfig = require('./tailwind-tokens.config.js');

module.exports = {
  content: ["./src/**/*.{html,ts}"],
  darkMode: 'class',
  presets: [tokenConfig], // Tokens als Preset laden
  theme: {
    extend: {
      // Zus√§tzliche manuelle Erweiterungen
    }
  }
};
```

## üß™ Token-Nutzung in Komponenten

```typescript
// Beispiel: Button Component
import { DESIGN_TOKENS, getToken } from '@core/design-system/design-tokens.generated';

export class ButtonComponent {
  // Direkte Token-Nutzung
  primaryColor = DESIGN_TOKENS.color.primary;
  
  // Oder mit Helper
  buttonPadding = getToken('button.padding.md');
}
```

## üìä Token-Validierung

```javascript
// scripts/validate-tokens.js
const StyleDictionary = require('style-dictionary');
const config = require('../style-dictionary.config.js');

// Baue Tokens
const sd = StyleDictionary.extend(config);

// Validiere
console.log('üîç Validating tokens...');

try {
  sd.buildAllPlatforms();
  console.log('‚úÖ All tokens valid!');
} catch (error) {
  console.error('‚ùå Token validation failed:', error);
  process.exit(1);
}
```

## üéØ Migration bestehender Tokens

```javascript
// scripts/migrate-tokens.js
const fs = require('fs');

// Lese alte Token-Dateien
const oldTokens1 = require('../src/app/core/design-system/design-tokens.ts');
const oldTokens2 = require('../src/app/design-system/tokens/colors.json');

// Merge zu Master-Tokens
const masterTokens = {
  color: {
    // Migration Logic
  }
};

// Schreibe neue Token-Datei
fs.writeFileSync(
  'tokens/base/migrated.json',
  JSON.stringify(masterTokens, null, 2)
);
```

## ‚úÖ Erste Schritte

1. **Installation**: `npm install --save-dev style-dictionary`
2. **Config kopieren**: Erstelle `style-dictionary.config.js`
3. **Token-Struktur**: Erstelle `tokens/` Verzeichnis
4. **Erste Tokens**: Erstelle `tokens/base/colors.json`
5. **Build testen**: `npm run tokens:build`
6. **Integration pr√ºfen**: Check generierte Dateien

## üî• Vorteile nach Setup

- **√Ñndern Sie eine Farbe** ‚Üí Automatisch in TypeScript, CSS, SCSS, Tailwind
- **Neue Token** ‚Üí Sofort in allen Formaten verf√ºgbar
- **Type-Safety** ‚Üí TypeScript Interfaces automatisch generiert
- **CI/CD Ready** ‚Üí Build-Step integriert
- **Team-Konsistenz** ‚Üí Alle nutzen gleiche Tokens